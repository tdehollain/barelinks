import{c as ne,r as o,j as n,a as Ke,b as M,R as $,u as J,d as ae,e as xe,f as Z,B as A,g as Ve,h as ze,i as He,k as fe,l as qe}from"./index-LzpBAQLe.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ye=ne("search",We);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],pe=ne("tag",Qe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ve=ne("trash-2",Xe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ze=ne("x",Je),et=o.createContext(null),se={didCatch:!1,error:null};class tt extends o.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=se}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,s,a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];(r=(s=this.props).onReset)===null||r===void 0||r.call(s,{args:c,reason:"imperative-api"}),this.setState(se)}}componentDidCatch(t,r){var s,a;(s=(a=this.props).onError)===null||s===void 0||s.call(a,t,r)}componentDidUpdate(t,r){const{didCatch:s}=this.state,{resetKeys:a}=this.props;if(s&&r.error!==null&&nt(t.resetKeys,a)){var c,i;(c=(i=this.props).onReset)===null||c===void 0||c.call(i,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(se)}}render(){const{children:t,fallbackRender:r,FallbackComponent:s,fallback:a}=this.props,{didCatch:c,error:i}=this.state;let l=t;if(c){const m={error:i,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")l=r(m);else if(s)l=o.createElement(s,m);else if(a!==void 0)l=a;else throw i}return o.createElement(et.Provider,{value:{didCatch:c,error:i,resetErrorBoundary:this.resetErrorBoundary}},l)}}function nt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,s)=>!Object.is(r,t[s]))}function rt({error:e,resetErrorBoundary:t}){return n.jsxs("div",{role:"alert",className:"rounded-md border border-destructive/30 bg-destructive/10 p-4 text-sm text-destructive",children:[n.jsx("p",{className:"font-semibold",children:"Something went wrong."}),n.jsx("pre",{className:"mt-2 overflow-x-auto whitespace-pre-wrap break-words text-xs",children:e.message}),n.jsx("button",{type:"button",onClick:t,className:"mt-3 rounded-md border border-destructive/60 bg-background px-3 py-1 text-xs font-medium text-destructive hover:bg-destructive/20",children:"Try again"})]})}function ge({children:e,fallback:t,onReset:r}){return n.jsx(tt,{fallbackRender:t?typeof t=="function"?t:()=>t:rt,onReset:r,children:e})}const U=Ke,X=[{name:"Red",value:"red",class:"bg-gradient-to-tr from-red-500 to-red-700"},{name:"Orange",value:"orange",class:"bg-gradient-to-tr from-orange-400 to-orange-600"},{name:"Yellow",value:"yellow",class:"bg-gradient-to-tr from-amber-400 to-amber-600"},{name:"Green",value:"green",class:"bg-gradient-to-tr from-emerald-500 to-emerald-700"},{name:"Teal",value:"teal",class:"bg-gradient-to-tr from-teal-400 to-cyan-600"},{name:"Blue",value:"blue",class:"bg-gradient-to-tr from-sky-500 to-blue-700"},{name:"Indigo",value:"indigo",class:"bg-gradient-to-tr from-indigo-500 to-indigo-700"},{name:"Purple",value:"purple",class:"bg-gradient-to-tr from-violet-500 to-purple-700"},{name:"Pink",value:"pink",class:"bg-gradient-to-tr from-pink-500 to-rose-600"},{name:"Gray",value:"gray",class:"bg-gradient-to-tr from-slate-500 to-slate-700"}],he=20;function ee({name:e,color:t,className:r="",showDelete:s=!1,onDelete:a,isDeleting:c=!1,linkCount:i}){const l=X.find(m=>m.value===t)?.class||"bg-gradient-to-r from-slate-500 to-slate-700";return n.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-white rounded-full ${l} ${r}`,children:[n.jsx(pe,{className:"h-3 w-3"}),e,i!==void 0&&` (${i})`,s&&a&&n.jsx("button",{onClick:()=>{a()},disabled:c,"aria-label":`Remove tag ${e}`,className:"cursor-pointer ml-1 hover:bg-black/20 rounded-full p-0.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(ve,{className:"h-3 w-3"})})]})}const ie=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:M("rounded-xl border border-border bg-card text-card-foreground shadow",e),...t}));ie.displayName="Card";const st=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:M("flex flex-col space-y-1.5 p-6",e),...t}));st.displayName="CardHeader";const ot=o.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:M("text-lg font-semibold leading-none tracking-tight",e),...t}));ot.displayName="CardTitle";const at=o.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:M("text-sm text-muted-foreground",e),...t}));at.displayName="CardDescription";const ce=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:M("p-6 pt-0",e),...t}));ce.displayName="CardContent";const it=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:M("flex items-center p-6 pt-0",e),...t}));it.displayName="CardFooter";function z({className:e,type:t,...r}){return n.jsx("input",{type:t,"data-slot":"input",className:M("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}function P(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}function de(e,t=[]){let r=[];function s(c,i){const l=o.createContext(i),m=r.length;r=[...r,i];const g=f=>{const{scope:v,children:y,...h}=f,N=v?.[e]?.[m]||l,u=o.useMemo(()=>h,Object.values(h));return n.jsx(N.Provider,{value:u,children:y})};g.displayName=c+"Provider";function d(f,v){const y=v?.[e]?.[m]||l,h=o.useContext(y);if(h)return h;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${c}\``)}return[g,d]}const a=()=>{const c=r.map(i=>o.createContext(i));return function(l){const m=l?.[e]||c;return o.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return a.scopeName=e,[s,ct(a,...t)]}function ct(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const i=s.reduce((l,{useScope:m,scopeName:g})=>{const f=m(c)[`__scope${g}`];return{...l,...f}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function lt(e){const t=e+"CollectionProvider",[r,s]=de(t),[a,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=N=>{const{scope:u,children:w}=N,C=$.useRef(null),b=$.useRef(new Map).current;return n.jsx(a,{scope:u,itemMap:b,collectionRef:C,children:w})};i.displayName=t;const l=e+"CollectionSlot",m=ae(l),g=$.forwardRef((N,u)=>{const{scope:w,children:C}=N,b=c(l,w),j=J(u,b.collectionRef);return n.jsx(m,{ref:j,children:C})});g.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",v=ae(d),y=$.forwardRef((N,u)=>{const{scope:w,children:C,...b}=N,j=$.useRef(null),k=J(u,j),I=c(d,w);return $.useEffect(()=>(I.itemMap.set(j,{ref:j,...b}),()=>void I.itemMap.delete(j))),n.jsx(v,{[f]:"",ref:k,children:C})});y.displayName=d;function h(N){const u=c(e+"CollectionConsumer",N);return $.useCallback(()=>{const C=u.collectionRef.current;if(!C)return[];const b=Array.from(C.querySelectorAll(`[${f}]`));return Array.from(u.itemMap.values()).sort((I,L)=>b.indexOf(I.ref.current)-b.indexOf(L.ref.current))},[u.collectionRef,u.itemMap])}return[{Provider:i,Slot:g,ItemSlot:y},h,s]}var te=globalThis?.document?o.useLayoutEffect:()=>{},dt=xe[" useId ".trim().toString()]||(()=>{}),ut=0;function be(e){const[t,r]=o.useState(dt());return te(()=>{r(s=>s??String(ut++))},[e]),e||(t?`radix-${t}`:"")}var mt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],K=mt.reduce((e,t)=>{const r=ae(`Primitive.${t}`),s=o.forwardRef((a,c)=>{const{asChild:i,...l}=a,m=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(m,{...l,ref:c})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function ft(e){const t=o.useRef(e);return o.useEffect(()=>{t.current=e}),o.useMemo(()=>(...r)=>t.current?.(...r),[])}var gt=xe[" useInsertionEffect ".trim().toString()]||te;function ye({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,c,i]=ht({defaultProp:t,onChange:r}),l=e!==void 0,m=l?e:a;{const d=o.useRef(e!==void 0);o.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const g=o.useCallback(d=>{if(l){const f=xt(d)?d(e):d;f!==e&&i.current?.(f)}else c(d)},[l,e,c,i]);return[m,g]}function ht({defaultProp:e,onChange:t}){const[r,s]=o.useState(e),a=o.useRef(r),c=o.useRef(t);return gt(()=>{c.current=t},[t]),o.useEffect(()=>{a.current!==r&&(c.current?.(r),a.current=r)},[r,a]),[r,s,c]}function xt(e){return typeof e=="function"}var pt=o.createContext(void 0);function Ne(e){const t=o.useContext(pt);return e||t||"ltr"}var oe="rovingFocusGroup.onEntryFocus",vt={bubbles:!1,cancelable:!0},W="RovingFocusGroup",[le,we,bt]=lt(W),[yt,Ce]=de(W,[bt]),[Nt,wt]=yt(W),je=o.forwardRef((e,t)=>n.jsx(le.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(le.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Ct,{...e,ref:t})})}));je.displayName=W;var Ct=o.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:c,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:m,onEntryFocus:g,preventScrollOnEntryFocus:d=!1,...f}=e,v=o.useRef(null),y=J(t,v),h=Ne(c),[N,u]=ye({prop:i,defaultProp:l??null,onChange:m,caller:W}),[w,C]=o.useState(!1),b=ft(g),j=we(r),k=o.useRef(!1),[I,L]=o.useState(0);return o.useEffect(()=>{const S=v.current;if(S)return S.addEventListener(oe,b),()=>S.removeEventListener(oe,b)},[b]),n.jsx(Nt,{scope:r,orientation:s,dir:h,loop:a,currentTabStopId:N,onItemFocus:o.useCallback(S=>u(S),[u]),onItemShiftTab:o.useCallback(()=>C(!0),[]),onFocusableItemAdd:o.useCallback(()=>L(S=>S+1),[]),onFocusableItemRemove:o.useCallback(()=>L(S=>S-1),[]),children:n.jsx(K.div,{tabIndex:w||I===0?-1:0,"data-orientation":s,...f,ref:y,style:{outline:"none",...e.style},onMouseDown:P(e.onMouseDown,()=>{k.current=!0}),onFocus:P(e.onFocus,S=>{const D=!k.current;if(S.target===S.currentTarget&&D&&!w){const F=new CustomEvent(oe,vt);if(S.currentTarget.dispatchEvent(F),!F.defaultPrevented){const _=j().filter(E=>E.focusable),V=_.find(E=>E.active),R=_.find(E=>E.id===N),G=[V,R,..._].filter(Boolean).map(E=>E.ref.current);Re(G,d)}}k.current=!1}),onBlur:P(e.onBlur,()=>C(!1))})})}),Te="RovingFocusGroupItem",Se=o.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:c,children:i,...l}=e,m=be(),g=c||m,d=wt(Te,r),f=d.currentTabStopId===g,v=we(r),{onFocusableItemAdd:y,onFocusableItemRemove:h,currentTabStopId:N}=d;return o.useEffect(()=>{if(s)return y(),()=>h()},[s,y,h]),n.jsx(le.ItemSlot,{scope:r,id:g,focusable:s,active:a,children:n.jsx(K.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:P(e.onMouseDown,u=>{s?d.onItemFocus(g):u.preventDefault()}),onFocus:P(e.onFocus,()=>d.onItemFocus(g)),onKeyDown:P(e.onKeyDown,u=>{if(u.key==="Tab"&&u.shiftKey){d.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const w=St(u,d.orientation,d.dir);if(w!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||u.shiftKey)return;u.preventDefault();let b=v().filter(j=>j.focusable).map(j=>j.ref.current);if(w==="last")b.reverse();else if(w==="prev"||w==="next"){w==="prev"&&b.reverse();const j=b.indexOf(u.currentTarget);b=d.loop?Rt(b,j+1):b.slice(j+1)}setTimeout(()=>Re(b))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:N!=null}):i})})});Se.displayName=Te;var jt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Tt(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function St(e,t,r){const s=Tt(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return jt[s]}function Re(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function Rt(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var It=je,Et=Se;function kt(e,t){return o.useReducer((r,s)=>t[r][s]??r,e)}var Ie=e=>{const{present:t,children:r}=e,s=At(t),a=typeof r=="function"?r({present:s.isPresent}):o.Children.only(r),c=J(s.ref,Mt(a));return typeof r=="function"||s.isPresent?o.cloneElement(a,{ref:c}):null};Ie.displayName="Presence";function At(e){const[t,r]=o.useState(),s=o.useRef(null),a=o.useRef(e),c=o.useRef("none"),i=e?"mounted":"unmounted",[l,m]=kt(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const g=Q(s.current);c.current=l==="mounted"?g:"none"},[l]),te(()=>{const g=s.current,d=a.current;if(d!==e){const v=c.current,y=Q(g);e?m("MOUNT"):y==="none"||g?.display==="none"?m("UNMOUNT"):m(d&&v!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,m]),te(()=>{if(t){let g;const d=t.ownerDocument.defaultView??window,f=y=>{const N=Q(s.current).includes(CSS.escape(y.animationName));if(y.target===t&&N&&(m("ANIMATION_END"),!a.current)){const u=t.style.animationFillMode;t.style.animationFillMode="forwards",g=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=u)})}},v=y=>{y.target===t&&(c.current=Q(s.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(g),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else m("ANIMATION_END")},[t,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:o.useCallback(g=>{s.current=g?getComputedStyle(g):null,r(g)},[])}}function Q(e){return e?.animationName||"none"}function Mt(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var re="Tabs",[Ft]=de(re,[Ce]),Ee=Ce(),[_t,ue]=Ft(re),ke=o.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:c,orientation:i="horizontal",dir:l,activationMode:m="automatic",...g}=e,d=Ne(l),[f,v]=ye({prop:s,onChange:a,defaultProp:c??"",caller:re});return n.jsx(_t,{scope:r,baseId:be(),value:f,onValueChange:v,orientation:i,dir:d,activationMode:m,children:n.jsx(K.div,{dir:d,"data-orientation":i,...g,ref:t})})});ke.displayName=re;var Ae="TabsList",Me=o.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,c=ue(Ae,r),i=Ee(r);return n.jsx(It,{asChild:!0,...i,orientation:c.orientation,dir:c.dir,loop:s,children:n.jsx(K.div,{role:"tablist","aria-orientation":c.orientation,...a,ref:t})})});Me.displayName=Ae;var Fe="TabsTrigger",_e=o.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...c}=e,i=ue(Fe,r),l=Ee(r),m=De(i.baseId,s),g=Oe(i.baseId,s),d=s===i.value;return n.jsx(Et,{asChild:!0,...l,focusable:!a,active:d,children:n.jsx(K.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":g,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:m,...c,ref:t,onMouseDown:P(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?i.onValueChange(s):f.preventDefault()}),onKeyDown:P(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(s)}),onFocus:P(e.onFocus,()=>{const f=i.activationMode!=="manual";!d&&!a&&f&&i.onValueChange(s)})})})});_e.displayName=Fe;var Pe="TabsContent",Le=o.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:c,...i}=e,l=ue(Pe,r),m=De(l.baseId,s),g=Oe(l.baseId,s),d=s===l.value,f=o.useRef(d);return o.useEffect(()=>{const v=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(v)},[]),n.jsx(Ie,{present:a||d,children:({present:v})=>n.jsx(K.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":m,hidden:!v,id:g,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:v&&c})})});Le.displayName=Pe;function De(e,t){return`${e}-trigger-${t}`}function Oe(e,t){return`${e}-content-${t}`}var Pt=ke,$e=Me,Ue=_e,Be=Le;const Ge=Pt,me=o.forwardRef(({className:e,...t},r)=>n.jsx($e,{ref:r,className:M("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));me.displayName=$e.displayName;const H=o.forwardRef(({className:e,...t},r)=>n.jsx(Ue,{ref:r,className:M("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));H.displayName=Ue.displayName;const q=o.forwardRef(({className:e,...t},r)=>n.jsx(Be,{ref:r,className:M("mt-4 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));q.displayName=Be.displayName;function Lt({open:e,onClose:t,linkTitle:r,existingTags:s,linkTags:a,linkId:c}){const[i,l]=o.useState("existing"),[m,g]=o.useState(""),[d,f]=o.useState(!1),[v,y]=o.useState(""),[h,N]=o.useState(X[0]?.value??"gray"),[u,w]=o.useState(!1),[C,b]=o.useState(null),j=Z(U.tags.attachTagToLink),k=Z(U.tags.createTag),I=p=>{(p==="existing"||p==="create")&&l(p)};if(o.useEffect(()=>{if(!e)return;const p=x=>{x.key==="Escape"&&t()};return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[e,t]),o.useEffect(()=>{if(!e)return;const p=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=p}},[e]),o.useEffect(()=>{e&&(l("existing"),g(""),f(!1),y(""),N(X[0]?.value??"gray"),w(!1),b(null))},[e]),!e)return null;const L=r?.trim()||"Untitled link",S=new Set(a?.map(p=>p._id)??[]),D=(s??[]).filter(({tag:p})=>!S.has(p._id)),F=m.trim().toLowerCase(),_=F.length===0?D.slice(0,10):D.filter(({tag:p})=>p.name.toLowerCase().includes(F)),V=F.length===0?_:_.slice(0,10),R=(s?.length??0)>0,B=D.length>0,G=async p=>{if(!(!c||d))try{f(!0),await j({linkId:c,tagId:p}),t()}catch(x){console.error("Failed to attach tag to link:",x),f(!1)}},E=async p=>{if(p.preventDefault(),u)return;const x=v.trim();if(x.length===0){b("Tag name is required.");return}if(x.length>20){b("Tag name must be 20 characters or fewer.");return}try{w(!0),b(null);const O=(await k({name:x,color:h}))?.tagId;c&&O&&await j({linkId:c,tagId:O}),t()}catch(T){console.error("Failed to create tag:",T);const O=T instanceof Error?T.message:"Failed to create tag.";b(O)}finally{w(!1)}};return n.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-50 flex items-center justify-center bg-background/70 backdrop-blur-sm px-4",onClick:t,children:n.jsxs("div",{className:"w-full max-w-xl rounded-lg border border-border bg-card p-6 shadow-xl flex flex-col",onClick:p=>p.stopPropagation(),children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Add Tag"}),n.jsxs("span",{className:"mt-1 block text-sm text-muted-foreground",children:['For: "',L,'"']})]}),n.jsx(A,{type:"button",variant:"ghost",size:"sm","aria-label":"Close",onClick:t,children:n.jsx(Ze,{className:"h-4 w-4"})})]}),n.jsxs(Ge,{value:i,onValueChange:I,className:"mt-4 flex flex-1 flex-col",children:[n.jsxs(me,{className:"w-full",children:[n.jsx(H,{value:"existing",className:"flex-1 cursor-pointer",children:"Existing Tag"}),n.jsx(H,{value:"create",className:"flex-1 cursor-pointer",children:"Create New Tag"})]}),n.jsx(q,{value:"existing",className:"flex-1",children:n.jsx(ie,{className:"flex h-full min-h-[14rem] flex-col",children:n.jsx(ce,{className:"flex-1 overflow-y-auto",children:R?B?n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsx(z,{placeholder:"Search tags...",value:m,onChange:p=>g(p.target.value),disabled:d}),_.length>0?n.jsx("div",{className:"flex flex-wrap gap-2",children:V.map(({tag:p,count:x})=>n.jsx("button",{type:"button",onClick:()=>G(p._id),disabled:d,className:"group inline-flex rounded-full cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60",children:n.jsx(ee,{name:p.name,color:p.color,linkCount:x,className:"transition-transform group-hover:scale-[1.02]"})},p._id))}):n.jsxs("p",{className:"text-sm text-muted-foreground",children:['No tags match "',m,'".']})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"All available tags are already attached to this link."}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"You have not created any tags yet."})})})}),n.jsx(q,{value:"create",className:"flex-1",children:n.jsx(ie,{className:"flex h-full min-h-[14rem] flex-col",children:n.jsx(ce,{className:"flex-1 overflow-y-auto",children:n.jsxs("form",{className:"flex h-full flex-col gap-3",onSubmit:E,children:[n.jsxs("div",{className:"space-y-2 mt-4",children:[n.jsx(z,{id:"new-tag-name",placeholder:"e.g. Inspiration",value:v,onChange:p=>{y(p.target.value),C&&b(null)},maxLength:20,disabled:u}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:"Max 20 characters"}),n.jsxs("span",{children:[v.trim().length,"/20"]})]})]}),n.jsx("div",{className:"space-y-2",children:n.jsx("div",{className:"flex items-center mt-2 gap-3 overflow-x-auto pb-1",children:X.map(p=>{const x=p.value===h;return n.jsx("button",{type:"button",onClick:()=>N(p.value),disabled:u,"aria-label":p.name,"aria-pressed":x,className:`h-9 w-9 rounded-full border-2 cursor-pointer transition focus:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60 ${x?"border-primary":"border-transparent hover:border-primary/60"}`,children:n.jsx("span",{"aria-hidden":"true",className:`block h-full w-full rounded-full ${p.class}`})},p.value)})})}),C&&n.jsx("p",{className:"text-sm text-destructive",children:C}),n.jsx("div",{className:"mt-auto flex justify-end",children:n.jsx(A,{type:"submit",disabled:u||v.trim().length===0,children:"Create & add tag"})})]})})})})]})]})})}function Dt({tagsWithUsage:e,selectedTagId:t=null,onSelectTag:r,term:s="",onTermChange:a}){const[c,i]=o.useState(!1),[l,m]=o.useState("term"),[g,d]=o.useState(""),f=o.useId(),v=o.useMemo(()=>{const h=g.trim().toLowerCase();return[...h.length===0?e:e.filter(({tag:u})=>u.name.toLowerCase().includes(h))].sort((u,w)=>w.count-u.count).slice(0,10)},[g,e]),y=h=>{if(!r)return;r(t===h?null:h)};return n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-start gap-2",children:n.jsxs(A,{type:"button",variant:"ghost",size:"icon",className:"cursor-pointer",onClick:()=>i(h=>!h),"aria-expanded":c,"aria-controls":f,children:[n.jsx(Ye,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:c?"Hide search options":"Show search options"})]})}),c&&n.jsx("div",{id:f,className:"flex w-full flex-col gap-2 rounded-lg border border-border bg-card/70 p-4",children:n.jsxs(Ge,{value:l,onValueChange:h=>{(h==="term"||h==="tag")&&m(h)},className:"",children:[n.jsxs(me,{children:[n.jsx(H,{value:"term",className:"cursor-pointer",children:"By term"}),n.jsx(H,{value:"tag",className:"cursor-pointer",children:"By tag"})]}),n.jsx(q,{value:"term",className:"pt-4",children:n.jsx(z,{placeholder:"Search links by title or URL",value:s,onChange:h=>a?.(h.target.value)})}),n.jsx(q,{value:"tag",className:"pt-4 space-y-3",children:e.length>0?n.jsxs(n.Fragment,{children:[n.jsx(z,{placeholder:"Filter tags by name",value:g,onChange:h=>d(h.target.value)}),v.length>0?n.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(({tag:h,count:N})=>{const u=t===h._id;return n.jsx("button",{type:"button",onClick:()=>y(h._id),className:`cursor-pointer inline-flex rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:opacity-60 ${u?"ring-2 ring-primary":""}`,"aria-pressed":u,children:n.jsx(ee,{name:h.name,color:h.color,linkCount:N,className:u?"ring-0":""})},h._id)})}):n.jsxs("p",{className:"text-sm text-muted-foreground",children:['No tags match "',g,'".']})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"You have not created any tags yet. Create a tag from a link to search by tag here."})})]})})]})}function Ot(){const{isLoaded:e,isSignedIn:t}=Ve(),r=Z(U.links.deleteLink),s=Z(U.tags.detachTagFromLink),a=ze({from:"/"}),{page:c,term:i}=He({from:"/"}),l=Math.max(0,(c??1)-1),[m,g]=o.useState(null),[d,f]=o.useState(null),[v,y]=o.useState(null),[h,N]=o.useState(i??""),[u,w]=o.useState(null);o.useEffect(()=>{const x=i??"";N(T=>T===x?T:x)},[i]);const C=fe(U.links.getLinks,e&&t?{page:l,pageSize:he,tagId:u??void 0,term:h.trim().length>0?h.trim():void 0}:"skip"),b=fe(U.tags.getTagsWithUsage,e&&t?{}:"skip"),j=C===void 0,k=C?.links??[],I=b?.tags??[];if(!e)return n.jsx("div",{className:"w-full max-w-5xl mx-auto mt-8 text-center text-muted-foreground",children:"Loading…"});if(!t)return n.jsx("div",{className:"w-full max-w-5xl mx-auto mt-8 text-center text-muted-foreground",children:"Please sign in to view your links."});const L=async x=>{if(!m)try{g(x),await r({linkId:x})}catch(T){console.error("Failed to delete link:",T)}finally{g(null)}},S=async(x,T)=>{const O=`${x}:${T}`;if(v!==O)try{y(O),await s({linkId:x,tagId:T})}catch(Y){console.error("Failed to remove tag from link:",Y)}finally{y(Y=>Y===O?null:Y)}},D=C?.totalCount,F=C?.hasMore??!1,_=typeof D=="number"?Math.max(1,Math.ceil(D/he)):l+1+(F?1:0),V=l+1,R=h.trim(),B=u?I.find(({tag:x})=>x._id===u)?.tag??null:null,G=x=>{w(x),l!==0&&a({to:"/",search:{page:1,term:R.length>0?R:void 0}})},E=x=>{N(x);const T=x.trim();a({to:"/",search:{page:1,term:T.length>0?T:void 0}})},p=R.length>0&&u?`No links match "${R}" with the selected tag.`:R.length>0?`No links match "${R}".`:u?"No links match the selected tag yet.":"No links yet. Save your first link to get started.";return n.jsxs("div",{className:"w-full max-w-5xl mx-auto mt-8 space-y-3",children:[n.jsx(Dt,{tagsWithUsage:I,selectedTagId:u,onSelectTag:G,term:h,onTermChange:E}),R.length>0&&n.jsxs("div",{className:"flex flex-start items-center gap-2 text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Showing links matching",` "${R}"`]}),n.jsx(A,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>E(""),children:"Clear"})]}),B&&n.jsxs("div",{className:"flex flex-start items-center gap-2 text-sm text-muted-foreground",children:[n.jsx("span",{children:"Showing links with Tag"}),n.jsx(ee,{name:B.name,color:B.color}),n.jsx(A,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>G(null),children:"Clear"})]}),n.jsxs("div",{className:"flex items-center justify-center gap-3 pt-4",children:[n.jsx(A,{variant:"outline",size:"sm",className:"cursor-pointer",onClick:()=>a({to:"/",search:{page:Math.max(1,l),term:R.length>0?R:void 0}}),disabled:l===0,children:"Previous"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",V," of ",_]}),n.jsx(A,{variant:"outline",size:"sm",className:"cursor-pointer",onClick:()=>a({to:"/",search:{page:l+2,term:R.length>0?R:void 0}}),disabled:!F,children:"Next"})]}),j?n.jsx("div",{className:"w-full mt-4 text-center text-muted-foreground",children:"Loading your links…"}):k.length===0?n.jsx("div",{className:"w-full mt-4 text-center text-muted-foreground",children:p}):k.map(x=>n.jsxs("div",{className:"flex items-center gap-3 mb-0",children:[n.jsx(A,{variant:"ghost",size:"sm",onClick:()=>L(x._id),disabled:m===x._id,className:"cursor-pointer text-red-500 hover:text-red-700 hover:bg-red-50 p-1 disabled:opacity-50 disabled:pointer-events-none",children:n.jsx(ve,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-xs text-muted-foreground italic",children:new Date(x.createdAtIso).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})}),n.jsxs("div",{className:"flex flex-1 items-center gap-1 min-w-0",children:[n.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"text-foreground truncate text-sm",children:x.title}),x.tags.length>0&&n.jsx("div",{className:"flex items-center gap-2 ml-2",children:x.tags.map(T=>n.jsx(ee,{name:T.name,color:T.color,showDelete:!0,onDelete:()=>S(x._id,T._id),isDeleting:v===`${x._id}:${T._id}`},T._id))}),(!x.tags||x.tags?.length<3)&&n.jsx(A,{variant:"ghost",size:"sm",onClick:()=>f({id:x._id,title:x.title??null,tags:x.tags??[]}),className:"cursor-pointer",children:n.jsx(pe,{className:"h-4 w-4"})})]})]},x._id)),n.jsx(Lt,{open:d!==null,onClose:()=>f(null),linkTitle:d?.title,existingTags:I,linkTags:d?.tags,linkId:d?.id})]})}function $t(){const[e,t]=o.useState(""),[r,s]=o.useState(!1),a=qe(U.linkActions.createLink),c=async i=>{i.preventDefault();const l=e.trim();if(!(!l||r))try{s(!0),await a({url:l}),t("")}catch(m){console.error("Failed to create link:",m)}finally{s(!1)}};return n.jsx("div",{className:"w-full max-w-5xl mx-auto mt-16",children:n.jsxs("form",{onSubmit:c,className:"flex gap-3",children:[n.jsx(z,{type:"url",placeholder:"Enter a URL...",value:e,onChange:i=>t(i.target.value),className:"flex-1",required:!0}),n.jsx(A,{type:"submit",className:"cursor-pointer",disabled:r,children:"Add"})]})})}function Bt(){return n.jsxs("main",{children:[n.jsx(ge,{children:n.jsx($t,{})}),n.jsx(ge,{children:n.jsx(Ot,{})})]})}export{Bt as component};
