import{c as te,r as o,j as n,a as ze,b as M,R as $,u as X,d as oe,e as he,f as J,B as A,g as xe,h as pe,i as ve,k as ae,l as We}from"./index-CA1ynmH-.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qe=te("search",He);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],be=te("tag",Ye);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ye=te("trash-2",Qe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Je=te("x",Xe),Ze=o.createContext(null),re={didCatch:!1,error:null};class et extends o.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=re}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,s,a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];(r=(s=this.props).onReset)===null||r===void 0||r.call(s,{args:c,reason:"imperative-api"}),this.setState(re)}}componentDidCatch(t,r){var s,a;(s=(a=this.props).onError)===null||s===void 0||s.call(a,t,r)}componentDidUpdate(t,r){const{didCatch:s}=this.state,{resetKeys:a}=this.props;if(s&&r.error!==null&&tt(t.resetKeys,a)){var c,i;(c=(i=this.props).onReset)===null||c===void 0||c.call(i,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(re)}}render(){const{children:t,fallbackRender:r,FallbackComponent:s,fallback:a}=this.props,{didCatch:c,error:i}=this.state;let l=t;if(c){const m={error:i,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")l=r(m);else if(s)l=o.createElement(s,m);else if(a!==void 0)l=a;else throw i}return o.createElement(Ze.Provider,{value:{didCatch:c,error:i,resetErrorBoundary:this.resetErrorBoundary}},l)}}function tt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,s)=>!Object.is(r,t[s]))}function nt({error:e,resetErrorBoundary:t}){return n.jsxs("div",{role:"alert",className:"rounded-md border border-destructive/30 bg-destructive/10 p-4 text-sm text-destructive",children:[n.jsx("p",{className:"font-semibold",children:"Something went wrong."}),n.jsx("pre",{className:"mt-2 overflow-x-auto whitespace-pre-wrap break-words text-xs",children:e.message}),n.jsx("button",{type:"button",onClick:t,className:"mt-3 rounded-md border border-destructive/60 bg-background px-3 py-1 text-xs font-medium text-destructive hover:bg-destructive/20",children:"Try again"})]})}function fe({children:e,fallback:t,onReset:r}){return n.jsx(et,{fallbackRender:t?typeof t=="function"?t:()=>t:nt,onReset:r,children:e})}const L=ze,Q=[{name:"Red",value:"red",class:"bg-gradient-to-tr from-red-500 to-red-700"},{name:"Orange",value:"orange",class:"bg-gradient-to-tr from-orange-400 to-orange-600"},{name:"Yellow",value:"yellow",class:"bg-gradient-to-tr from-amber-400 to-amber-600"},{name:"Green",value:"green",class:"bg-gradient-to-tr from-emerald-500 to-emerald-700"},{name:"Teal",value:"teal",class:"bg-gradient-to-tr from-teal-400 to-cyan-600"},{name:"Blue",value:"blue",class:"bg-gradient-to-tr from-sky-500 to-blue-700"},{name:"Indigo",value:"indigo",class:"bg-gradient-to-tr from-indigo-500 to-indigo-700"},{name:"Purple",value:"purple",class:"bg-gradient-to-tr from-violet-500 to-purple-700"},{name:"Pink",value:"pink",class:"bg-gradient-to-tr from-pink-500 to-rose-600"},{name:"Gray",value:"gray",class:"bg-gradient-to-tr from-slate-500 to-slate-700"}],ge=20;function Z({name:e,color:t,className:r="",showDelete:s=!1,onDelete:a,isDeleting:c=!1,linkCount:i}){const l=Q.find(m=>m.value===t)?.class||"bg-gradient-to-r from-slate-500 to-slate-700";return n.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-white rounded-full ${l} ${r}`,children:[n.jsx(be,{className:"h-3 w-3"}),e,i!==void 0&&` (${i})`,s&&a&&n.jsx("button",{onClick:()=>{a()},disabled:c,"aria-label":`Remove tag ${e}`,className:"cursor-pointer ml-1 hover:bg-black/20 rounded-full p-0.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(ye,{className:"h-3 w-3"})})]})}const ie=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:M("rounded-xl border border-border bg-card text-card-foreground shadow",e),...t}));ie.displayName="Card";const rt=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:M("flex flex-col space-y-1.5 p-6",e),...t}));rt.displayName="CardHeader";const st=o.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:M("text-lg font-semibold leading-none tracking-tight",e),...t}));st.displayName="CardTitle";const ot=o.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:M("text-sm text-muted-foreground",e),...t}));ot.displayName="CardDescription";const ce=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:M("p-6 pt-0",e),...t}));ce.displayName="CardContent";const at=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:M("flex items-center p-6 pt-0",e),...t}));at.displayName="CardFooter";function V({className:e,type:t,...r}){return n.jsx("input",{type:t,"data-slot":"input",className:M("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}function _(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}function de(e,t=[]){let r=[];function s(c,i){const l=o.createContext(i),m=r.length;r=[...r,i];const f=u=>{const{scope:p,children:N,...j}=u,y=p?.[e]?.[m]||l,g=o.useMemo(()=>j,Object.values(j));return n.jsx(y.Provider,{value:g,children:N})};f.displayName=c+"Provider";function d(u,p){const N=p?.[e]?.[m]||l,j=o.useContext(N);if(j)return j;if(i!==void 0)return i;throw new Error(`\`${u}\` must be used within \`${c}\``)}return[f,d]}const a=()=>{const c=r.map(i=>o.createContext(i));return function(l){const m=l?.[e]||c;return o.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return a.scopeName=e,[s,it(a,...t)]}function it(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const i=s.reduce((l,{useScope:m,scopeName:f})=>{const u=m(c)[`__scope${f}`];return{...l,...u}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function ct(e){const t=e+"CollectionProvider",[r,s]=de(t),[a,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:g,children:w}=y,T=$.useRef(null),b=$.useRef(new Map).current;return n.jsx(a,{scope:g,itemMap:b,collectionRef:T,children:w})};i.displayName=t;const l=e+"CollectionSlot",m=oe(l),f=$.forwardRef((y,g)=>{const{scope:w,children:T}=y,b=c(l,w),C=X(g,b.collectionRef);return n.jsx(m,{ref:C,children:T})});f.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",p=oe(d),N=$.forwardRef((y,g)=>{const{scope:w,children:T,...b}=y,C=$.useRef(null),x=X(g,C),S=c(d,w);return $.useEffect(()=>(S.itemMap.set(C,{ref:C,...b}),()=>void S.itemMap.delete(C))),n.jsx(p,{[u]:"",ref:x,children:T})});N.displayName=d;function j(y){const g=c(e+"CollectionConsumer",y);return $.useCallback(()=>{const T=g.collectionRef.current;if(!T)return[];const b=Array.from(T.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,R)=>b.indexOf(S.ref.current)-b.indexOf(R.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:f,ItemSlot:N},j,s]}var ee=globalThis?.document?o.useLayoutEffect:()=>{},lt=he[" useId ".trim().toString()]||(()=>{}),dt=0;function Ne(e){const[t,r]=o.useState(lt());return ee(()=>{r(s=>s??String(dt++))},[e]),e||(t?`radix-${t}`:"")}var ut=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G=ut.reduce((e,t)=>{const r=oe(`Primitive.${t}`),s=o.forwardRef((a,c)=>{const{asChild:i,...l}=a,m=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(m,{...l,ref:c})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function mt(e){const t=o.useRef(e);return o.useEffect(()=>{t.current=e}),o.useMemo(()=>(...r)=>t.current?.(...r),[])}var ft=he[" useInsertionEffect ".trim().toString()]||ee;function we({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,c,i]=gt({defaultProp:t,onChange:r}),l=e!==void 0,m=l?e:a;{const d=o.useRef(e!==void 0);o.useEffect(()=>{const u=d.current;u!==l&&console.warn(`${s} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const f=o.useCallback(d=>{if(l){const u=ht(d)?d(e):d;u!==e&&i.current?.(u)}else c(d)},[l,e,c,i]);return[m,f]}function gt({defaultProp:e,onChange:t}){const[r,s]=o.useState(e),a=o.useRef(r),c=o.useRef(t);return ft(()=>{c.current=t},[t]),o.useEffect(()=>{a.current!==r&&(c.current?.(r),a.current=r)},[r,a]),[r,s,c]}function ht(e){return typeof e=="function"}var xt=o.createContext(void 0);function Ce(e){const t=o.useContext(xt);return e||t||"ltr"}var se="rovingFocusGroup.onEntryFocus",pt={bubbles:!1,cancelable:!0},H="RovingFocusGroup",[le,je,vt]=ct(H),[bt,Te]=de(H,[vt]),[yt,Nt]=bt(H),Se=o.forwardRef((e,t)=>n.jsx(le.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(le.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(wt,{...e,ref:t})})}));Se.displayName=H;var wt=o.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:c,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:m,onEntryFocus:f,preventScrollOnEntryFocus:d=!1,...u}=e,p=o.useRef(null),N=X(t,p),j=Ce(c),[y,g]=we({prop:i,defaultProp:l??null,onChange:m,caller:H}),[w,T]=o.useState(!1),b=mt(f),C=je(r),x=o.useRef(!1),[S,R]=o.useState(0);return o.useEffect(()=>{const I=p.current;if(I)return I.addEventListener(se,b),()=>I.removeEventListener(se,b)},[b]),n.jsx(yt,{scope:r,orientation:s,dir:j,loop:a,currentTabStopId:y,onItemFocus:o.useCallback(I=>g(I),[g]),onItemShiftTab:o.useCallback(()=>T(!0),[]),onFocusableItemAdd:o.useCallback(()=>R(I=>I+1),[]),onFocusableItemRemove:o.useCallback(()=>R(I=>I-1),[]),children:n.jsx(G.div,{tabIndex:w||S===0?-1:0,"data-orientation":s,...u,ref:N,style:{outline:"none",...e.style},onMouseDown:_(e.onMouseDown,()=>{x.current=!0}),onFocus:_(e.onFocus,I=>{const D=!x.current;if(I.target===I.currentTarget&&D&&!w){const P=new CustomEvent(se,pt);if(I.currentTarget.dispatchEvent(P),!P.defaultPrevented){const E=C().filter(v=>v.focusable),O=E.find(v=>v.active),U=E.find(v=>v.id===y),K=[O,U,...E].filter(Boolean).map(v=>v.ref.current);Ee(K,d)}}x.current=!1}),onBlur:_(e.onBlur,()=>T(!1))})})}),Ie="RovingFocusGroupItem",Re=o.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:c,children:i,...l}=e,m=Ne(),f=c||m,d=Nt(Ie,r),u=d.currentTabStopId===f,p=je(r),{onFocusableItemAdd:N,onFocusableItemRemove:j,currentTabStopId:y}=d;return o.useEffect(()=>{if(s)return N(),()=>j()},[s,N,j]),n.jsx(le.ItemSlot,{scope:r,id:f,focusable:s,active:a,children:n.jsx(G.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:_(e.onMouseDown,g=>{s?d.onItemFocus(f):g.preventDefault()}),onFocus:_(e.onFocus,()=>d.onItemFocus(f)),onKeyDown:_(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const w=Tt(g,d.orientation,d.dir);if(w!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=p().filter(C=>C.focusable).map(C=>C.ref.current);if(w==="last")b.reverse();else if(w==="prev"||w==="next"){w==="prev"&&b.reverse();const C=b.indexOf(g.currentTarget);b=d.loop?St(b,C+1):b.slice(C+1)}setTimeout(()=>Ee(b))}}),children:typeof i=="function"?i({isCurrentTabStop:u,hasTabStop:y!=null}):i})})});Re.displayName=Ie;var Ct={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jt(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Tt(e,t,r){const s=jt(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Ct[s]}function Ee(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function St(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var It=Se,Rt=Re;function Et(e,t){return o.useReducer((r,s)=>t[r][s]??r,e)}var ke=e=>{const{present:t,children:r}=e,s=kt(t),a=typeof r=="function"?r({present:s.isPresent}):o.Children.only(r),c=X(s.ref,At(a));return typeof r=="function"||s.isPresent?o.cloneElement(a,{ref:c}):null};ke.displayName="Presence";function kt(e){const[t,r]=o.useState(),s=o.useRef(null),a=o.useRef(e),c=o.useRef("none"),i=e?"mounted":"unmounted",[l,m]=Et(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const f=Y(s.current);c.current=l==="mounted"?f:"none"},[l]),ee(()=>{const f=s.current,d=a.current;if(d!==e){const p=c.current,N=Y(f);e?m("MOUNT"):N==="none"||f?.display==="none"?m("UNMOUNT"):m(d&&p!==N?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,m]),ee(()=>{if(t){let f;const d=t.ownerDocument.defaultView??window,u=N=>{const y=Y(s.current).includes(CSS.escape(N.animationName));if(N.target===t&&y&&(m("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",f=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},p=N=>{N.target===t&&(c.current=Y(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{d.clearTimeout(f),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else m("ANIMATION_END")},[t,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:o.useCallback(f=>{s.current=f?getComputedStyle(f):null,r(f)},[])}}function Y(e){return e?.animationName||"none"}function At(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ne="Tabs",[Mt,$t]=de(ne,[Te]),Ae=Te(),[Ft,ue]=Mt(ne),Me=o.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:c,orientation:i="horizontal",dir:l,activationMode:m="automatic",...f}=e,d=Ce(l),[u,p]=we({prop:s,onChange:a,defaultProp:c??"",caller:ne});return n.jsx(Ft,{scope:r,baseId:Ne(),value:u,onValueChange:p,orientation:i,dir:d,activationMode:m,children:n.jsx(G.div,{dir:d,"data-orientation":i,...f,ref:t})})});Me.displayName=ne;var Fe="TabsList",_e=o.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,c=ue(Fe,r),i=Ae(r);return n.jsx(It,{asChild:!0,...i,orientation:c.orientation,dir:c.dir,loop:s,children:n.jsx(G.div,{role:"tablist","aria-orientation":c.orientation,...a,ref:t})})});_e.displayName=Fe;var Pe="TabsTrigger",Le=o.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...c}=e,i=ue(Pe,r),l=Ae(r),m=Ue(i.baseId,s),f=$e(i.baseId,s),d=s===i.value;return n.jsx(Rt,{asChild:!0,...l,focusable:!a,active:d,children:n.jsx(G.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":f,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:m,...c,ref:t,onMouseDown:_(e.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?i.onValueChange(s):u.preventDefault()}),onKeyDown:_(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&i.onValueChange(s)}),onFocus:_(e.onFocus,()=>{const u=i.activationMode!=="manual";!d&&!a&&u&&i.onValueChange(s)})})})});Le.displayName=Pe;var De="TabsContent",Oe=o.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:c,...i}=e,l=ue(De,r),m=Ue(l.baseId,s),f=$e(l.baseId,s),d=s===l.value,u=o.useRef(d);return o.useEffect(()=>{const p=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(p)},[]),n.jsx(ke,{present:a||d,children:({present:p})=>n.jsx(G.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":m,hidden:!p,id:f,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:p&&c})})});Oe.displayName=De;function Ue(e,t){return`${e}-trigger-${t}`}function $e(e,t){return`${e}-content-${t}`}var _t=Me,Be=_e,Ge=Le,Ke=Oe;const Ve=_t,me=o.forwardRef(({className:e,...t},r)=>n.jsx(Be,{ref:r,className:M("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));me.displayName=Be.displayName;const z=o.forwardRef(({className:e,...t},r)=>n.jsx(Ge,{ref:r,className:M("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));z.displayName=Ge.displayName;const W=o.forwardRef(({className:e,...t},r)=>n.jsx(Ke,{ref:r,className:M("mt-4 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));W.displayName=Ke.displayName;function Pt({open:e,onClose:t,linkTitle:r,existingTags:s,linkTags:a,linkId:c}){const[i,l]=o.useState("existing"),[m,f]=o.useState(""),[d,u]=o.useState(!1),[p,N]=o.useState(""),[j,y]=o.useState(Q[0]?.value??"gray"),[g,w]=o.useState(!1),[T,b]=o.useState(null),C=J(L.tags.attachTagToLink),x=J(L.tags.createTag),S=h=>{(h==="existing"||h==="create")&&l(h)};if(o.useEffect(()=>{if(!e)return;const h=k=>{k.key==="Escape"&&t()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[e,t]),o.useEffect(()=>{if(!e)return;const h=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=h}},[e]),o.useEffect(()=>{e&&(l("existing"),f(""),u(!1),N(""),y(Q[0]?.value??"gray"),w(!1),b(null))},[e]),!e)return null;const R=r?.trim()||"Untitled link",I=new Set(a?.map(h=>h._id)??[]),D=(s??[]).filter(({tag:h})=>!I.has(h._id)),P=m.trim().toLowerCase(),E=P.length===0?D.slice(0,10):D.filter(({tag:h})=>h.name.toLowerCase().includes(P)),O=P.length===0?E:E.slice(0,10),U=(s?.length??0)>0,B=D.length>0,K=async h=>{if(!(!c||d))try{u(!0),await C({linkId:c,tagId:h}),t()}catch(k){console.error("Failed to attach tag to link:",k),u(!1)}},v=async h=>{if(h.preventDefault(),g)return;const k=p.trim();if(k.length===0){b("Tag name is required.");return}if(k.length>20){b("Tag name must be 20 characters or fewer.");return}try{w(!0),b(null);const q=(await x({name:k,color:j}))?.tagId;c&&q&&await C({linkId:c,tagId:q}),t()}catch(F){console.error("Failed to create tag:",F);const q=F instanceof Error?F.message:"Failed to create tag.";b(q)}finally{w(!1)}};return n.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-50 flex items-center justify-center bg-background/70 backdrop-blur-sm px-4",onClick:t,children:n.jsxs("div",{className:"w-full max-w-xl rounded-lg border border-border bg-card p-6 shadow-xl flex flex-col",onClick:h=>h.stopPropagation(),children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Add Tag"}),n.jsxs("span",{className:"mt-1 block text-sm text-muted-foreground",children:['For: "',R,'"']})]}),n.jsx(A,{type:"button",variant:"ghost",size:"sm","aria-label":"Close",onClick:t,children:n.jsx(Je,{className:"h-4 w-4"})})]}),n.jsxs(Ve,{value:i,onValueChange:S,className:"mt-4 flex flex-1 flex-col",children:[n.jsxs(me,{className:"w-full",children:[n.jsx(z,{value:"existing",className:"flex-1 cursor-pointer",children:"Existing Tag"}),n.jsx(z,{value:"create",className:"flex-1 cursor-pointer",children:"Create New Tag"})]}),n.jsx(W,{value:"existing",className:"flex-1",children:n.jsx(ie,{className:"flex h-full min-h-[14rem] flex-col",children:n.jsx(ce,{className:"flex-1 overflow-y-auto",children:U?B?n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsx(V,{placeholder:"Search tags...",value:m,onChange:h=>f(h.target.value),disabled:d}),E.length>0?n.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(({tag:h,count:k})=>n.jsx("button",{type:"button",onClick:()=>K(h._id),disabled:d,className:"group inline-flex rounded-full cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60",children:n.jsx(Z,{name:h.name,color:h.color,linkCount:k,className:"transition-transform group-hover:scale-[1.02]"})},h._id))}):n.jsxs("p",{className:"text-sm text-muted-foreground",children:['No tags match "',m,'".']})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"All available tags are already attached to this link."}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"You have not created any tags yet."})})})}),n.jsx(W,{value:"create",className:"flex-1",children:n.jsx(ie,{className:"flex h-full min-h-[14rem] flex-col",children:n.jsx(ce,{className:"flex-1 overflow-y-auto",children:n.jsxs("form",{className:"flex h-full flex-col gap-3",onSubmit:v,children:[n.jsxs("div",{className:"space-y-2 mt-4",children:[n.jsx(V,{id:"new-tag-name",placeholder:"e.g. Inspiration",value:p,onChange:h=>{N(h.target.value),T&&b(null)},maxLength:20,disabled:g}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:"Max 20 characters"}),n.jsxs("span",{children:[p.trim().length,"/20"]})]})]}),n.jsx("div",{className:"space-y-2",children:n.jsx("div",{className:"flex items-center mt-2 gap-3 overflow-x-auto pb-1",children:Q.map(h=>{const k=h.value===j;return n.jsx("button",{type:"button",onClick:()=>y(h.value),disabled:g,"aria-label":h.name,"aria-pressed":k,className:`h-9 w-9 rounded-full border-2 cursor-pointer transition focus:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60 ${k?"border-primary":"border-transparent hover:border-primary/60"}`,children:n.jsx("span",{"aria-hidden":"true",className:`block h-full w-full rounded-full ${h.class}`})},h.value)})})}),T&&n.jsx("p",{className:"text-sm text-destructive",children:T}),n.jsx("div",{className:"mt-auto flex justify-end",children:n.jsx(A,{type:"submit",disabled:g||p.trim().length===0,children:"Create & add tag"})})]})})})})]})]})})}function Lt(){const{isLoaded:e,isSignedIn:t}=xe(),r=J(L.links.deleteLink),s=J(L.tags.detachTagFromLink),a=pe({from:"/"}),{page:c,term:i,tag:l}=ve({from:"/"}),m=Math.max(0,(c??1)-1),[f,d]=o.useState(null),[u,p]=o.useState(null),[N,j]=o.useState(null),y=l??null,g=ae(L.links.getLinks,e&&t?{page:m,pageSize:ge,tagId:y??void 0,term:(i??"").length>0?i:void 0}:"skip"),w=ae(L.tags.getTagsWithUsage,e&&t?{}:"skip"),T=g===void 0,b=g?.links??[],C=w?.tags??[];if(!e)return n.jsx("div",{className:"w-full max-w-5xl mx-auto mt-8 text-center text-muted-foreground",children:"Loading…"});if(!t)return n.jsx("div",{className:"w-full max-w-5xl mx-auto mt-8 text-center text-muted-foreground",children:"Please sign in to view your links."});const x=async v=>{if(!f)try{d(v),await r({linkId:v})}catch(h){console.error("Failed to delete link:",h)}finally{d(null)}},S=async(v,h)=>{const k=`${v}:${h}`;if(N!==k)try{j(k),await s({linkId:v,tagId:h})}catch(F){console.error("Failed to remove tag from link:",F)}finally{j(F=>F===k?null:F)}},R=g?.totalCount,I=g?.hasMore??!1,D=typeof R=="number"?Math.max(1,Math.ceil(R/ge)):m+1+(I?1:0),P=m+1,E=(i??"").trim(),O=y?C.find(({tag:v})=>v._id===y)?.tag??null:null,U=E.length>0?E:void 0,B=y??void 0,K=E.length>0&&y?`No links match "${E}" with the selected tag.`:E.length>0?`No links match "${E}".`:y?"No links match the selected tag yet.":"No links yet. Save your first link to get started.";return n.jsxs("div",{className:"w-full max-w-5xl mx-auto space-y-3 mb-8",children:[E.length>0&&n.jsxs("div",{className:"flex flex-start items-center gap-2 text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Showing links matching",` "${E}"`]}),n.jsx(A,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>a({to:"/",search:{page:1,term:void 0,tag:B}}),children:"Clear"})]}),O&&n.jsxs("div",{className:"flex flex-start items-center gap-2 text-sm text-muted-foreground",children:[n.jsx("span",{children:"Showing links with Tag"}),n.jsx(Z,{name:O.name,color:O.color}),n.jsx(A,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>a({to:"/",search:{page:1,term:U,tag:void 0}}),children:"Clear"})]}),n.jsxs("div",{className:"flex items-center justify-center gap-3 pt-4",children:[n.jsx(A,{variant:"outline",size:"sm",className:"cursor-pointer",onClick:()=>a({to:"/",search:{page:Math.max(1,m),term:U,tag:B}}),disabled:m===0,children:"Previous"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",P," of ",D]}),n.jsx(A,{variant:"outline",size:"sm",className:"cursor-pointer",onClick:()=>a({to:"/",search:{page:m+2,term:U,tag:B}}),disabled:!I,children:"Next"})]}),T?n.jsx("div",{className:"w-full mt-4 text-center text-muted-foreground",children:"Loading your links…"}):b.length===0?n.jsx("div",{className:"w-full mt-4 text-center text-muted-foreground",children:K}):b.map(v=>n.jsxs("div",{className:"flex items-center gap-3 mb-0",children:[n.jsx(A,{variant:"ghost",size:"sm",onClick:()=>x(v._id),disabled:f===v._id,className:"cursor-pointer text-red-500 hover:text-red-700 hover:bg-red-50 p-1 disabled:opacity-50 disabled:pointer-events-none",children:n.jsx(ye,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-xs text-muted-foreground italic",children:new Date(v.createdAtIso).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})}),n.jsxs("div",{className:"flex flex-1 items-center gap-1 min-w-0",children:[n.jsx("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"text-foreground truncate text-sm",children:v.title}),v.tags.length>0&&n.jsx("div",{className:"flex items-center gap-2 ml-2",children:v.tags.map(h=>n.jsx(Z,{name:h.name,color:h.color,showDelete:!0,onDelete:()=>S(v._id,h._id),isDeleting:N===`${v._id}:${h._id}`},h._id))}),(!v.tags||v.tags?.length<3)&&n.jsx(A,{variant:"ghost",size:"sm",onClick:()=>p({id:v._id,title:v.title??null,tags:v.tags??[]}),className:"cursor-pointer",children:n.jsx(be,{className:"h-4 w-4"})})]})]},v._id)),n.jsx(Pt,{open:u!==null,onClose:()=>p(null),linkTitle:u?.title,existingTags:C,linkTags:u?.tags,linkId:u?.id})]})}function Dt({isVisible:e,panelId:t}){const r=pe({from:"/"}),s=ve({from:"/"}),{isLoaded:a,isSignedIn:c}=xe(),i=s.tag??null,[l,m]=o.useState(s.term??""),[f,d]=o.useState("term"),[u,p]=o.useState(""),N=o.useId(),j=t??N;o.useEffect(()=>{const x=s.term??"";m(S=>S===x?S:x)},[s.term]);const y=ae(L.tags.getTagsWithUsage,a&&c?{}:"skip"),g=o.useMemo(()=>y?.tags??[],[y?.tags]),w=o.useMemo(()=>{const x=u.trim().toLowerCase();return[...x.length===0?g:g.filter(({tag:R})=>R.name.toLowerCase().includes(x))].sort((R,I)=>I.count-R.count).slice(0,10)},[u,g]),T=l.trim(),b=x=>{m(x);const S=x.trim();r({to:"/",search:{page:1,term:S.length>0?S:void 0,tag:i??void 0}})},C=x=>{const S=i===x?null:x;r({to:"/",search:{page:1,term:T.length>0?T:void 0,tag:S??void 0}})};return e?n.jsx("div",{id:j,className:"flex w-full flex-col gap-2 rounded-lg border border-border bg-card/70 p-4",children:n.jsxs(Ve,{value:f,onValueChange:x=>{(x==="term"||x==="tag")&&d(x)},className:"",children:[n.jsxs(me,{children:[n.jsx(z,{value:"term",className:"cursor-pointer",children:"By term"}),n.jsx(z,{value:"tag",className:"cursor-pointer",children:"By tag"})]}),n.jsx(W,{value:"term",className:"",children:n.jsx(V,{placeholder:"Search links by title or URL",value:l,onChange:x=>b(x.target.value)})}),n.jsx(W,{value:"tag",className:"space-y-3",children:g.length>0?n.jsxs(n.Fragment,{children:[n.jsx(V,{placeholder:"Filter tags by name",value:u,onChange:x=>p(x.target.value)}),w.length>0?n.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(({tag:x,count:S})=>{const R=i===x._id;return n.jsx("button",{type:"button",onClick:()=>C(x._id),className:`cursor-pointer inline-flex rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:opacity-60 ${R?"ring-2 ring-primary":""}`,"aria-pressed":R,children:n.jsx(Z,{name:x.name,color:x.color,linkCount:S,className:R?"ring-0":""})},x._id)})}):n.jsxs("p",{className:"text-sm text-muted-foreground",children:['No tags match "',u,'".']})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"You have not created any tags yet. Create a tag from a link to search by tag here."})})]})}):null}function Ot(){const[e,t]=o.useState(""),[r,s]=o.useState(!1),[a,c]=o.useState(!1),i=o.useId(),l=We(L.linkActions.createLink),m=async f=>{f.preventDefault();const d=e.trim();if(!(!d||r))try{s(!0),await l({url:d}),t("")}catch(u){console.error("Failed to create link:",u)}finally{s(!1)}};return n.jsxs("div",{className:"w-full max-w-5xl mx-auto mt-16",children:[n.jsxs("div",{className:"mt-4 flex w-full items-center gap-3",children:[n.jsxs(A,{type:"button",variant:"ghost",size:"icon",className:"cursor-pointer shrink-0",onClick:()=>c(f=>!f),"aria-expanded":a,"aria-controls":i,children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:a?"Hide search options":"Show search options"})]}),n.jsxs("form",{onSubmit:m,className:"flex flex-1 items-center gap-3",children:[n.jsx(V,{type:"url",placeholder:"Enter a URL...",value:e,onChange:f=>t(f.target.value),className:"flex-1",required:!0}),n.jsx(A,{type:"submit",className:"cursor-pointer",disabled:r,children:"Add"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Dt,{isVisible:a,panelId:i})})]})}function Bt(){return n.jsxs("main",{children:[n.jsx(fe,{children:n.jsx(Ot,{})}),n.jsx(fe,{children:n.jsx(Lt,{})})]})}export{Bt as component};
